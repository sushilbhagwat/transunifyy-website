---
// Fundations
import Text from "@/components/fundations/elements/Text.astro";
import Kicker from "@/components/fundations/elements/Kicker.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";

// Social Sector Partners
const socialPartners = [
  { name: "Lupin Foundation", logo: "/images/partners/LupinFoundation.jpg" },
  { name: "Atlas Copco", logo: "/images/partners/AtlasCopco.jpg" },
  { name: "Raintree Foundation", logo: "/images/partners/RaintreeFoundation.JPG" },
  { name: "Tejgyan Foundation", logo: "/images/partners/TejGyanFoundation.jpg" },
];

// Technology Partners
const techPartners = [
  { name: "Amazon Web Services", logo: "/images/partners/Amazon.jpg" },
  { name: "Flutter", logo: "/images/partners/Flutter.JPG" },
  { name: "Supabase", logo: "/images/partners/Supabase.jpg" },
  { name: "Astro", logo: "/images/partners/Astro.JPG" },
  { name: "Anthropic", logo: "/images/partners/Anthoropic.jpg" },
];
---

<section class="bg-base-50 overflow-hidden">
  <Wrapper variant="standard" class="pt-16 pb-6">
    <div class="text-center mb-4">
      <Kicker class="text-base-600">Our Partners</Kicker>
      <Text
        tag="h2"
        variant="displayMD"
        class="font-medium tracking-tight mt-4 text-accent-900"
      >
        Trusted by leading organizations
      </Text>
    </div>
  </Wrapper>

  <!-- Scrolling Container -->
  <div class="relative overflow-hidden">
    <!-- Gradient fades -->
    <div class="absolute left-0 top-0 bottom-0 w-24 bg-gradient-to-r from-base-50 to-transparent z-10 pointer-events-none"></div>
    <div class="absolute right-0 top-0 bottom-0 w-24 bg-gradient-to-l from-base-50 to-transparent z-10 pointer-events-none"></div>

    <!-- Marquee -->
    <div class="marquee">
      <!-- Group 1 -->
      <div class="marquee-group">
        <!-- Social label -->
        <div class="label label-social">
          <Text tag="span" variant="textSM" class="text-white font-medium text-center">
            Social Sector<br />Partners
          </Text>
        </div>

        {socialPartners.map((partner) => (
          <div class="partner-card">
            <img
              src={partner.logo}
              alt={partner.name}
              class="partner-logo"
              onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
            />
            <span class="fallback">{partner.name}</span>
          </div>
        ))}

        <!-- Tech label -->
        <div class="label label-tech">
          <Text tag="span" variant="textSM" class="text-white font-medium text-center">
            Technology<br />Partners
          </Text>
        </div>

        {techPartners.map((partner) => (
          <div class="partner-card">
            <img
              src={partner.logo}
              alt={partner.name}
              class="partner-logo"
              onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
            />
            <span class="fallback">{partner.name}</span>
          </div>
        ))}
      </div>

      <!-- Group 2 (exact duplicate for seamless loop) -->
      <div class="marquee-group" aria-hidden="true">
        <div class="label label-social">
          <Text tag="span" variant="textSM" class="text-white font-medium text-center">
            Social Sector<br />Partners
          </Text>
        </div>

        {socialPartners.map((partner) => (
          <div class="partner-card">
            <img
              src={partner.logo}
              alt={partner.name}
              class="partner-logo"
            />
            <span class="fallback">{partner.name}</span>
          </div>
        ))}

        <div class="label label-tech">
          <Text tag="span" variant="textSM" class="text-white font-medium text-center">
            Technology<br />Partners
          </Text>
        </div>

        {techPartners.map((partner) => (
          <div class="partner-card">
            <img
              src={partner.logo}
              alt={partner.name}
              class="partner-logo"
            />
            <span class="fallback">{partner.name}</span>
          </div>
        ))}
      </div>
    </div>
  </div>

  <Wrapper variant="standard" class="py-8">
    <div class="text-center">
      <Text tag="p" variant="textBase" class="text-base-500">
        Join 10+ organizations transforming social impact with Transunifyy
      </Text>
    </div>
  </Wrapper>
</section>

<style>
  /* Marquee */
  .marquee {
    display: flex;
    width: max-content;
    animation: marquee 28s linear infinite;
  }

  .marquee:hover {
    animation-play-state: paused;
  }

  .marquee-group {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding-right: 1.5rem;
  }

  @keyframes marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }

  /* Cards */
  .partner-card {
    flex-shrink: 0;
    width: 7rem;
    height: 4rem;
    background: white;
    border-radius: 0.75rem;
    border: 1px solid rgb(226 232 240);
    box-shadow: 0 1px 2px rgb(0 0 0 / 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
    transition: all 0.3s ease;
  }

  .partner-card:hover {
    box-shadow: 0 10px 20px rgb(0 0 0 / 0.12);
    transform: translateY(-2px);
  }

  .partner-logo {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  .fallback {
    display: none;
    font-size: 0.75rem;
    text-align: center;
    color: #64748b;
    font-weight: 500;
  }

  /* Labels */
  .label {
    flex-shrink: 0;
    width: 7rem;
    height: 4rem;
    border-radius: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
  }

  .label-social {
    background: rgb(79 70 229);
  }

  .label-tech {
    background: rgb(15 23 42);
  }

  @media (min-width: 768px) {
    .partner-card,
    .label {
      width: 10rem;
      height: 5rem;
    }

    .marquee {
      animation-duration: 40s;
    }
  }
</style>
