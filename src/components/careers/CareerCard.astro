---
// Fundations
import Text from "@/components/fundations/elements/Text.astro";
// Icons
import ArrowUpRight from "@/components/fundations/icons/ArrowUpRight.astro";

// Direct access to Supabase data structure
const career = Astro.props.career;

const { title, description, url, department } = {
  url: "/careers/" + career.slug,
  title: career.title,
  description: career.excerpt || career.about_role,
  department: career.department,
};
---

<div class="pb-8 border-b border-base-200 group relative hover:bg-base-25 p-4 rounded transition-colors">
  <!-- Single overlay link for the entire card -->
  <a
    href={url}
    title={`View role: ${title}`}
    aria-label={`View role: ${title}`}
    class="absolute inset-0 z-10">
    <span class="sr-only">View {title} position</span>
  </a>
  
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-y-4 lg:gap-x-8 items-start relative z-0">
    <Text
      tag="p"
      variant="textXS"
      class="uppercase text-base-600 font-medium"
    >
      {department}
    </Text>
    <div class="lg:col-span-2">
      <Text tag="h3" variant="textXL" class="font-medium text-accent-900">
        {title}
      </Text>
      <Text
        tag="p"
        variant="textBase"
        class="text-base-600 mt-1 line-clamp-2"
      >
        {description}
      </Text>
    </div>
    <!-- Visual indicator only, not a separate link -->
    <div class="lg:ml-auto text-accent-900 group-hover:text-accent-500 font-medium text-lg flex items-center gap-2">
      <span>View position</span>
      <ArrowUpRight
        size="sm"
        class="group-hover:rotate-45 duration-300 transition"
      />
    </div>
  </div>
</div>